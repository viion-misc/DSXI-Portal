'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

$(function () {
	var ServerSettings = new ServerSettingsClass();
});

//
// Server Settings Class
//

var ServerSettingsClass = (function () {
	function ServerSettingsClass() {
		_classCallCheck(this, ServerSettingsClass);

		this.watch();
	}

	//
	// Watch stuff
	//

	_createClass(ServerSettingsClass, [{
		key: 'watch',
		value: function watch() {
			$('.server-group h2').on('click', function (event) {
				var $group = $(event.currentTarget);
				$group.parent().find('> div').toggleClass('active');
				$group.find('.fa').toggleClass('fa-plus').toggleClass('fa-minus');
			});

			$('.form-expand-all').on('click', function (event) {
				$('.server-group').each(function (i, element) {
					var $group = $(element);
					$group.find('> div').addClass('active');
					$group.find('.fa').removeClass('fa-plus').addClass('fa-minus');
				});
			});

			$('.server-settings-form').on('submit', function (event) {
				$('#saveServerSettingsModal').modal('show');

				var timer = setInterval(function () {
					var $countdown = $('.restart-countdown em'),
					    number = parseInt($countdown.text());

					number = number - 1;
					if (number < 1) {
						clearInterval(timer);
					}

					$countdown.text(number > 0 ? number : 'Complete. Refreshing page ...');
				}, 1000);
			});
		}
	}]);

	return ServerSettingsClass;
})();